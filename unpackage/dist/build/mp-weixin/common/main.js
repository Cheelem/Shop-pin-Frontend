(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["common/main"],{"0a68":function(e,n,t){"use strict";(function(e){function t(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o="http://localhost:5488",i={code:{success:200,invalidCredential:401},request:function(n,t,i,a,r,c){var u=e.getStorageSync("pin-token");e.request({method:n,url:o+t,data:i,dataType:"json",header:{Authorization:"Bearer "+u},success:function(n){if(403==n.statusCode)return e.removeStorageSync("pin-token"),void e.redirectTo({url:"/pages/login/sign-in"});console.log("Succeed"),console.log(n),a&&a(n.data)},fail:function(n){403==n.statusCode&&e.navigateTo({url:"/pages/login/sign-in"}),console.log("Failed"),r&&r(n.data)},complete:function(){c&&c()}})},data:{isLoginInProgress:!1},invokers:{},setData:function(e,n){this.data[e]=n,this.invokers[e].setData(t({},e,n))},getData:function(e,n){return this.data[e]},bindData:function(e,n,t){this.data[e]=n,this.invokers[e]=t},loginFromWechat:function(n,t){if(this.data.isLoginInProgress)console.log("登录操作正在进行，互斥锁阻止继续执行");else{this.data.isLoginInProgress=!0;var o=this;e.login({provider:"wexin",success:function(i){console.log("success: "+JSON.stringify(i));var a=i.code;e.getUserInfo({provider:"wexin",success:function(i){console.log("用户信息："+JSON.stringify(i.userInfo));var r=i.userInfo;r.code=a,o.request("POST","/sign-in/wechat-mini-program",r,function(i){i.code==o.code.success?(e.setStorageSync("pin-token",i.data),n&&n()):t(i)},function(e){t&&t(e)})}})},fail:function(e){console.log("fail: "+JSON.stringify(e))}})}},getFriendlyTimeText:function(e){var n=new Date(e),t="",o=6e4,i=60*o,a=24*i,r=(new Date).getTime(),c=r-n.getTime();if(!(c<0)){var u=c/(7*a),s=c/a,l=c/i,f=c/o;return t=u>=1?n.getFullYear()+"-"+n.getMonth()+"-"+n.getDate()+" "+n.getHours()+":"+n.getMinutes()+":"+n.getSeconds():s>=1?parseInt(s)+"天前":l>=1?parseInt(l)+"小时前":f>=1?parseInt(f)+"分钟前":"刚刚",t}}};n.default=i}).call(this,t("543d")["default"])},"0c76":function(e,n,t){"use strict";t.r(n);var o=t("8c83");for(var i in o)"default"!==i&&function(e){t.d(n,e,function(){return o[e]})}(i);t("34f9");var a,r,c=t("2877"),u=Object(c["a"])(o["default"],a,r,!1,null,null,null);n["default"]=u.exports},"34f9":function(e,n,t){"use strict";var o=t("42bb"),i=t.n(o);i.a},"3ce0":function(e,n,t){"use strict";t("6a7a");var o=r(t("f3d3")),i=r(t("0c76")),a=r(t("0a68"));function r(e){return e&&e.__esModule?e:{default:e}}function c(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},o=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.forEach(function(n){u(e,n,t[n])})}return e}function u(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}o.default.config.productionTip=!1,i.default.mpType="app",o.default.prototype.$pin=a.default;var s=new o.default(c({},i.default));s.$mount()},"42bb":function(e,n,t){},"81f0":function(e,n,t){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var t={onLaunch:function(){console.log("App Launch");var e=this;wx.getSetting({success:function(n){n.authSetting["scope.userInfo"]&&e.$pin.loginFromWechat(e.loginSuccess,e.loginFailed)}})},onShow:function(){console.log("App Show")},onHide:function(){console.log("App Hide")},methods:{loginSuccess:function(){},loginFailed:function(){e.showToast({title:"请授权微信登录",icon:"none"})}}};n.default=t}).call(this,t("543d")["default"])},"8c83":function(e,n,t){"use strict";t.r(n);var o=t("81f0"),i=t.n(o);for(var a in o)"default"!==a&&function(e){t.d(n,e,function(){return o[e]})}(a);n["default"]=i.a}},[["3ce0","common/runtime","common/vendor"]]]);