{"version":3,"sources":["webpack:///C:/Development/NodeJS/Shop-pin-Frontend/Shop-pin-Frontend/App.vue?eaa1","webpack:///C:/Development/NodeJS/Shop-pin-Frontend/Shop-pin-Frontend/App.vue?5062","webpack:///C:/Development/NodeJS/Shop-pin-Frontend/Shop-pin-Frontend/App.vue?d78e","webpack:///C:/Development/NodeJS/Shop-pin-Frontend/Shop-pin-Frontend/main.js","webpack:///C:/Development/NodeJS/Shop-pin-Frontend/Shop-pin-Frontend/pin.js","webpack:///C:/Development/NodeJS/Shop-pin-Frontend/Shop-pin-Frontend/App.vue","webpack:///C:/Development/NodeJS/Shop-pin-Frontend/Shop-pin-Frontend/App.vue?4b9d"],"names":["Vue","config","productionTip","App","mpType","prototype","$pin","pin","app","$mount","SERVER_URL","code","success","invalidCredential","request","method","url","data","successCallback","failCallback","completeCallback","token","uni","getStorageSync","dataType","header","res","statusCode","removeStorageSync","redirectTo","console","log","fail","navigateTo","complete","isLoginInProgress","invokers","setData","key","value","getData","bindData","invoker","loginFromWechat","that","login","provider","loginRes","JSON","stringify","getUserInfo","infoRes","userInfo","successData","setStorageSync","failData","e","getFriendlyTimeText","dateTimeStamp","targetDate","Date","result","minute","hour","day","halfamonth","month","now","getTime","diffValue","monthC","weekC","dayC","hourC","minC","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","parseInt","onLaunch","wx","getSetting","authSetting","loginSuccess","loginFailed","onShow","onHide","methods","showToast","title","icon"],"mappings":"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","file":"common/main.js","sourcesContent":["var render, staticRenderFns\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../Standalone/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"C:\\\\Standalone\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('76e2227a', component.options)\n    } else {\n      api.reload('76e2227a', component.options)\n    }\n    \n  }\n}\ncomponent.options.__file = \"Development/NodeJS/Shop-pin-Frontend/Shop-pin-Frontend/App.vue\"\nexport default component.exports","import mod from \"-!../../../../Standalone/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../Standalone/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../Standalone/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--18-0!../../../../Standalone/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../Standalone/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../Standalone/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../Standalone/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../Standalone/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--18-0!../../../../Standalone/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../Standalone/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import mod from \"-!../../../../Standalone/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../Standalone/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../Standalone/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../Standalone/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../Standalone/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../Standalone/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../Standalone/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../Standalone/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../Standalone/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../Standalone/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../Standalone/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../Standalone/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"","import 'uni-pages';\r\nimport Vue from 'vue'\r\nimport App from './App'\r\nimport pin from './pin.js'\r\n\r\nVue.config.productionTip = false\r\n// Vue.prototype.$theme.primaryColor=\"#f37b1d\"\r\n\r\nApp.mpType = 'app'\r\n\r\nVue.prototype.$pin = pin\r\n\r\nconst app = new Vue({\r\n    ...App\r\n})\r\napp.$mount()","const SERVER_URL = \"http://localhost:5488\"\r\nexport default {\r\n\tcode: {\r\n\t\tsuccess: 200,\r\n\t\tinvalidCredential: 401\r\n\t},\r\n\trequest(method, url, data, successCallback, failCallback, completeCallback) {\r\n\t\t// 获取 token\r\n\t\tlet token = uni.getStorageSync(\"pin-token\")\r\n\t\t// 对整体请求的统一封装\r\n\t\tuni.request({\r\n\t\t\tmethod: method,\r\n\t\t\turl: SERVER_URL + url,\r\n\t\t\tdata: data,\r\n\t\t\tdataType: \"json\",\r\n\t\t\theader: {\r\n\t\t\t\t'Authorization': 'Bearer ' + token\r\n\t\t\t},\r\n\t\t\tsuccess: (res) => {\r\n\t\t\t\tif (res.statusCode == 403) {\r\n\t\t\t\t\t// token 过期，需要登录\r\n\t\t\t\t\tuni.removeStorageSync(\"pin-token\")\r\n\t\t\t\t\tuni.redirectTo({\r\n\t\t\t\t\t\turl: '/pages/login/sign-in'\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tconsole.log(\"Succeed\");\r\n\t\t\t\tconsole.log(res);\r\n\t\t\t\tif (successCallback) {\r\n\t\t\t\t\tsuccessCallback(res.data)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tfail: (res) => {\r\n\t\t\t\tif (res.statusCode == 403) {\r\n\t\t\t\t\t// token 过期，需要登录\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl: '/pages/login/sign-in'\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\tconsole.log(\"Failed\");\r\n\t\t\t\tif (failCallback) {\r\n\t\t\t\t\tfailCallback(res.data)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tcomplete: () => {\r\n\t\t\t\tif (completeCallback) {\r\n\t\t\t\t\tcompleteCallback()\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\tdata: {\r\n\t\tisLoginInProgress: false ,// 登录操作 mutex lock\r\n\t},\r\n\tinvokers: {},\r\n\tsetData(key, value) {\r\n\t\tthis.data[key] = value;\r\n\t\tthis.invokers[key].setData({\r\n\t\t\t[key]: value\r\n\t\t})\r\n\t},\r\n\tgetData(key, value) {\r\n\t\treturn this.data[key]\r\n\t},\r\n\tbindData(key, value, invoker) {\r\n\t\tthis.data[key] = value;\r\n\t\tthis.invokers[key] = invoker\r\n\t},\r\n\tloginFromWechat(successCallback, failCallback) {\r\n\t\tif(this.data.isLoginInProgress) {\r\n\t\t\tconsole.log(\"登录操作正在进行，互斥锁阻止继续执行\")\r\n\t\t\treturn\r\n\t\t}\r\n\t\tthis.data.isLoginInProgress = true\r\n\t\tlet that = this\r\n\t\tuni.login({\r\n\t\t\tprovider: 'wexin',\r\n\t\t\tsuccess: (loginRes) => {\r\n\t\t\t\tconsole.log(\"success: \" + JSON.stringify(loginRes));\r\n\t\t\t\tlet code = loginRes.code\r\n\t\t\t\t//案例直接获取用户信息，一般不是在APP端直接获取用户信息，比如微信，获取一个code，传递给后端，后端再去请求微信服务器获取用户信息\r\n\t\t\t\tuni.getUserInfo({\r\n\t\t\t\t\tprovider: 'wexin',\r\n\t\t\t\t\tsuccess: (infoRes) => {\r\n\t\t\t\t\t\tconsole.log('用户信息：' + JSON.stringify(infoRes.userInfo));\r\n\t\t\t\t\t\tlet userInfo = infoRes.userInfo\r\n\t\t\t\t\t\tuserInfo.code = code\r\n\t\t\t\t\t\tthat.request('POST', '/sign-in/wechat-mini-program', userInfo,\r\n\t\t\t\t\t\t\tsuccessData => {\r\n\t\t\t\t\t\t\t\tif (successData.code == that.code.success) {\r\n\t\t\t\t\t\t\t\t\t// 保存 token 到 storage\r\n\t\t\t\t\t\t\t\t\tuni.setStorageSync('pin-token', successData.data)\r\n\t\t\t\t\t\t\t\t\tif (successCallback) {\r\n\t\t\t\t\t\t\t\t\t\tsuccessCallback()\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tfailCallback(successData)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tfailData => {\r\n\t\t\t\t\t\t\t\tif (failCallback) {\r\n\t\t\t\t\t\t\t\t\tfailCallback(failData)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tfail: (e) => {\r\n\t\t\t\tconsole.log(\"fail: \" + JSON.stringify(e));\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\tgetFriendlyTimeText(dateTimeStamp) {\r\n\t\tlet targetDate = new Date(dateTimeStamp)\r\n\t\tlet result = \"\";\r\n\t\tlet minute = 1000 * 60;\r\n\t\tlet hour = minute * 60;\r\n\t\tlet day = hour * 24;\r\n\t\tlet halfamonth = day * 15;\r\n\t\tlet month = day * 30;\r\n\t\tlet now = new Date().getTime();\r\n\t\tlet diffValue = now - targetDate.getTime();\r\n\t\tif (diffValue < 0) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tlet monthC = diffValue / month;\r\n\t\tlet weekC = diffValue / (7 * day);\r\n\t\tlet dayC = diffValue / day;\r\n\t\tlet hourC = diffValue / hour;\r\n\t\tlet minC = diffValue / minute;\r\n\t\tif (weekC >= 1) {\r\n\t\t\tresult = targetDate.getFullYear() + '-' + targetDate.getMonth() + '-' + targetDate.getDate() + ' ' + targetDate.getHours() + ':' + targetDate.getMinutes() + ':' + targetDate.getSeconds()\r\n\t\t\t// result = \"\" + parseInt(weekC) + \"周前\";\r\n\t\t} else if (dayC >= 1) {\r\n\t\t\tresult = \"\" + parseInt(dayC) + \"天前\";\r\n\t\t} else if (hourC >= 1) {\r\n\t\t\tresult = \"\" + parseInt(hourC) + \"小时前\";\r\n\t\t} else if (minC >= 1) {\r\n\t\t\tresult = \"\" + parseInt(minC) + \"分钟前\";\r\n\t\t} else\r\n\t\t\tresult = \"刚刚\";\r\n\t\treturn result;\r\n\t}\r\n}\r\n","\nexport default {\n\tonLaunch: function() {\n\t\tconsole.log('App Launch')\n\t\tlet that = this\n\n\t\twx.getSetting({\n\t\t\tsuccess: function(res) {\n\t\t\t\tif (res.authSetting['scope.userInfo']) {\n\t\t\t\t\t// 在授权后自动使用微信登录\n\t\t\t\t\tthat.$pin.loginFromWechat(that.loginSuccess, that.loginFailed)\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\n\t},\n\tonShow: function() {\n\t\tconsole.log('App Show')\n\t},\n\tonHide: function() {\n\t\tconsole.log('App Hide')\n\t},\n\tmethods: {\n\t\tloginSuccess() {\n\t\t\t\n\t\t},\n\t\tloginFailed() {\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '请授权微信登录',\n\t\t\t\ticon: 'none'\n\t\t\t})\n\t\t}\n\t}\n}\n","// extracted by mini-css-extract-plugin"],"sourceRoot":""}