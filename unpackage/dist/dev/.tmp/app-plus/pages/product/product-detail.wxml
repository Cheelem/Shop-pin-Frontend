<view bind:__l="__l"><view class="status" style="{{'opacity:'+(afterHeaderOpacity)+';'}}"></view><view class="product-header"><view class="before" style="{{'opacity:'+(1-afterHeaderOpacity)+';'+('z-index:'+(beforeHeaderzIndex)+';')}}"><view class="back"><block wx:if="{{showBack}}"><view data-event-opts="{{[['tap',[['back',['$event']]]]]}}" class="icon xiangqian" bindtap="__e"></view></block></view><view class="middle"></view><view class="icon-btn"><view data-event-opts="{{[['tap',[['toMsg',['$event']]]]]}}" class="icon pin-icon" bindtap="__e">notifications</view><view data-event-opts="{{[['tap',[['joinCart',['$event']]]]]}}" class="icon pin-icon" bindtap="__e">shopping_cart</view></view></view><view class="after" style="{{'opacity:'+(afterHeaderOpacity)+';'+('z-index:'+(afterHeaderzIndex)+';')}}"><view class="back"><block wx:if="{{showBack}}"><view data-event-opts="{{[['tap',[['back',['$event']]]]]}}" class="icon pin-icon" bindtap="__e">arrow_back</view></block></view><view class="middle"><block wx:for="{{anchorlist}}" wx:for-item="anchor" wx:for-index="index" wx:key="index"><view data-event-opts="{{[['tap',[['toAnchor',[index]]]]]}}" class="{{[selectAnchor==index?'on':'']}}" bindtap="__e">{{anchor.name}}</view></block></view><view class="icon-btn"><view data-event-opts="{{[['tap',[['toMsg',['$event']]]]]}}" class="icon pin-icon" bindtap="__e">notifications</view><view data-event-opts="{{[['tap',[['joinCart',['$event']]]]]}}" class="icon pin-icon" bindtap="__e">shopping_cart</view></view></view></view><view class="footer"><view class="icons"><view data-event-opts="{{[['tap',[['share',['$event']]]]]}}" class="box" bindtap="__e"><view class="icon pin-icon">share</view><view class="text">分享</view></view><view data-event-opts="{{[['tap',[['toChat',['$event']]]]]}}" class="box" bindtap="__e"><view class="icon pin-icon">contact_phone</view><view class="text">客服</view></view><view data-event-opts="{{[['tap',[['keep',['$event']]]]]}}" class="box" bindtap="__e"><view class="icon pin-icon">{{isKeep?'star':'star_border'}}</view><view class="text">{{(isKeep?'已':'')+"收藏"}}</view></view></view><view class="btn"><view data-event-opts="{{[['tap',[['joinCart',['$event']]]]]}}" class="joinCart" bindtap="__e">加入购物车</view><view data-event-opts="{{[['tap',[['buy',['$event']]]]]}}" class="buy" bindtap="__e">立即购买</view></view></view><view data-event-opts="{{[['touchmove',[['discard',['$event']]]],['tap',[['hideShare',['$event']]]]]}}" class="{{['share',shareClass]}}" catchtouchmove="__e" bindtap="__e"><view class="mask"></view><view data-event-opts="{{[['tap',[['discard',['$event']]]]]}}" class="layer" catchtap="__e"><view class="h1">分享</view><view class="list"><view class="box"><image src="../../static/img/share/wx.png"></image><view class="title">微信好友</view></view><view class="box"><image src="../../static/img/share/pyq.png"></image><view class="title">朋友圈</view></view><view class="box"><image src="../../static/img/share/wb.png"></image><view class="title">新浪微博</view></view><view class="box"><image src="../../static/img/share/qq.png"></image><view class="title">QQ</view></view></view><view data-event-opts="{{[['tap',[['hideShare',['$event']]]]]}}" class="btn" bindtap="__e">取消</view></view></view><view data-event-opts="{{[['touchmove',[['discard',['$event']]]],['tap',[['hideService',['$event']]]]]}}" class="{{['popup service',serviceClass]}}" catchtouchmove="__e" bindtap="__e"><view class="mask"></view><view data-event-opts="{{[['tap',[['discard',['$event']]]]]}}" class="layer" catchtap="__e"><view class="content"><block wx:for="{{productData.service}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="row"><view class="title">{{item.name}}</view><view class="description">{{item.description}}</view></view></block></view><view class="btn"><view data-event-opts="{{[['tap',[['hideService',['$event']]]]]}}" class="button" bindtap="__e">确定</view></view></view></view><view data-event-opts="{{[['touchmove',[['discard',['$event']]]],['tap',[['hideSpec',['$event']]]]]}}" class="{{['popup spec',attributeModalClass]}}" catchtouchmove="__e" bindtap="__e"><view class="mask"></view><view data-event-opts="{{[['tap',[['discard',['$event']]]]]}}" class="layer" catchtap="__e"><view class="content"><block wx:for="{{productAttributes}}" wx:for-item="productAttribute" wx:for-index="index" wx:key="*this"><view><view class="title">{{productAttribute.attributeName}}</view><view class="attrubite-chip-list"><block wx:for="{{productAttribute.attributeValues}}" wx:for-item="item" wx:for-index="index2" wx:key="*this"><view data-event-opts="{{[['tap',[['setSelectAttribute',['$0','$1'],[[['productAttributes','',index,'attributeName']],[['productAttributes','',index],['attributeValues','',index2]]]]]]]}}" class="{{['attrubite-chip',attributeSelectMap[productAttribute.attributeName]==item?'on':'']}}" bindtap="__e">{{''+item+''}}</view></block></view></view></block><block wx:if="{{selectedResult.sku!=null}}"><view class="length"><view class="text">{{"数量 ("+productDetail.unitName+")"}}</view><view class="number"><view data-event-opts="{{[['tap',[['sub',['$event']]]]]}}" class="sub" catchtap="__e"><view class="icon pin-icon">remove</view></view><view data-event-opts="{{[['tap',[['discard',['$event']]]]]}}" class="input" catchtap="__e"><input type="number" data-event-opts="{{[['input',[['__set_model',['$0','amount','$event',[]],['selectedResult']]]]]}}" value="{{selectedResult.amount}}" bindinput="__e"/></view><view data-event-opts="{{[['tap',[['add',['$event']]]]]}}" class="add" catchtap="__e"><view class="icon pin-icon">add</view></view></view></view></block></view><view hidden="{{!(productAttributeValuesMap[selectedResult.skuString]!=null&&productAttributeValuesMap[selectedResult.skuString].stock>0)}}" class="btn"><view data-event-opts="{{[['tap',[['hideSpec',['$event']]]]]}}" class="button" bindtap="__e">完成</view></view></view></view><view class="swiper-box"><swiper circular="true" autoplay="true" data-event-opts="{{[['change',[['swiperChange',['$event']]]]]}}" bindchange="__e"><block wx:for="{{swiperList}}" wx:for-item="swiper" wx:for-index="__i0__" wx:key="id"><swiper-item><image src="{{swiper.img}}" data-event-opts="{{[['tap',[['toSwiper',['$0'],[[['swiperList','id',swiper.id]]]]]]]}}" bindtap="__e"></image></swiper-item></block></swiper><view class="indicator">{{currentSwiper+1+"/"+swiperList.length}}</view></view><view class="info-box product-info"><view class="price">{{"￥"+productDetail.price}}</view><view class="title">{{''+productDetail.name+''}}</view></view><view class="info-box spec"><view data-event-opts="{{[['tap',[['showService',['$event']]]]]}}" class="row" bindtap="__e"><view class="text">服务</view><view class="content"><block wx:for="{{productData.service}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="serviceitem">{{item.name}}</view></block></view><view class="arrow"><view class="icon pin-icon">keyboard_arrow_right</view></view></view><view data-event-opts="{{[['tap',[['showSpec',[false]]]]]}}" class="row" bindtap="__e"><view class="text">选择</view><view class="content"><view>{{"选择规格："+(selectedResult.sku==null?'未选择':selectedResult.skuString)+"\n\t\t\t\t\t"+(selectedResult.amount==0?'':selectedResult.amount+productDetail.unitName)}}</view></view><view class="arrow"><view class="icon pin-icon">keyboard_arrow_right</view></view></view></view><view class="info-box comments" id="comments"><view class="row"><view class="text">商品评价</view><view class="arrow"><view data-event-opts="{{[['tap',[['showComments',['$0'],['productDetail.id']]]]]}}" class="show" bindtap="__e">查看全部<view class="icon pin-icon">keyboard_arrow_right</view></view></view></view><view class="comment"><view class="user-info"><view class="face"><image src="{{productData.comment.userface}}"></image></view><view class="username">{{productData.comment.username}}</view></view><view class="content">{{''+productData.comment.content+''}}</view></view></view><view class="description"><view class="title">———— 商品详情 ————</view><view class="content"><rich-text nodes="{{descriptionStr}}"></rich-text></view></view></view>