<view bind:__l="__l"><block wx:if="{{orderItemList==null||orderItemList.length==0}}"><view><full-page-empty-state title="购物车为空" description="到处逛逛并把他们加入购物车吧" icon="shopping_cart"></full-page-empty-state></view></block><block wx:else><view><view class="pin-top-padding"></view><view class="goods-list"><block wx:for="{{orderItemMapByStore}}" wx:for-item="itemsInStore" wx:for-index="__i0__" wx:key="*this"><view class="pin-card"><view class="pin-card-title"><view data-event-opts="{{[['tap',[['allSelectByStore',['$0'],[[['orderItemMapByStore','',__i0__,'storeId']]]]]]]}}" class="checkbox-box" bindtap="__e"><view class="checkbox"><view class="{{[selectedStoreIdMap[itemsInStore.storeId]?'on':'']}}"></view></view><view class="text"><view class="pin-icon _i">store</view>{{''+itemsInStore.storeName}}</view></view></view><block wx:for="{{itemsInStore.items}}" wx:for-item="orderItem" wx:for-index="index" wx:key="*this"><view class="row"><view data-event-opts="{{[['tap',[['deleteGoods',['$0'],[[['orderItemMapByStore','',__i0__],['items','',index,'id']]]]]]]}}" class="menu" catchtap="__e"><view class="icon pin-icon">delete</view></view><view data-event-opts="{{[['touchstart',[['touchStart',[index,'$event']]]],['touchmove',[['touchMove',[index,'$event']]]],['touchend',[['touchEnd',[index,'$event']]]]]}}" class="{{['carrier',theIndex==index?'open':oldIndex==index?'close':'']}}" bindtouchstart="__e" bindtouchmove="__e" bindtouchend="__e"><view data-event-opts="{{[['tap',[['selected',['$0'],[[['orderItemMapByStore','',__i0__],['items','',index]]]]]]]}}" class="checkbox-box" bindtap="__e"><view class="checkbox"><view class="{{[selectedOrderItemIdMap[orderItem.id]==true?'on':'']}}"></view></view></view><view data-event-opts="{{[['tap',[['toProduct',['$0'],[[['orderItemMapByStore','',__i0__],['items','',index,'product.id']]]]]]]}}" class="goods-info" bindtap="__e"><view class="img"><image mode="aspectFill" src="{{orderItem.product.imageUrls}}"></image></view><view class="info"><view class="title">{{orderItem.product.name}}</view><view class="spec">{{orderItem.productAttributeValue.sku}}</view><view class="price-number"><view class="price"><text class="pin-primary pin-text-lg">{{"￥"+orderItem.totalPrice}}</text><text class="pin-accent pin-text-xs">{{'(单价 ￥'+orderItem.product.price+")"}}</text></view><view class="number"><view data-event-opts="{{[['tap',[['changeAmountOfOrderItem',['$0',orderItem.amount-1],[[['orderItemMapByStore','',__i0__],['items','',index,'id']]]]]]]}}" class="sub" catchtap="__e"><view class="icon pin-icon">remove</view></view><view data-event-opts="{{[['tap',[['discard',['$event']]]]]}}" class="input" catchtap="__e"><input type="number" data-event-opts="{{[['input',[['__set_model',['$0','amount','$event',[]],[[['orderItemMapByStore','',__i0__],['items','',index,'']]]],['sum',['$event',index]]]]]}}" value="{{orderItem.amount}}" bindinput="__e"/></view><view data-event-opts="{{[['tap',[['changeAmountOfOrderItem',['$0',orderItem.amount+1],[[['orderItemMapByStore','',__i0__],['items','',index,'id']]]]]]]}}" class="add" catchtap="__e"><view class="icon pin-icon">add</view></view></view></view></view></view></view></view></block></view></block></view></view></block><view class="footer" style="{{'bottom:'+(footerbottom)+';'}}"><view data-event-opts="{{[['tap',[['allSelect',['$event']]]]]}}" class="checkbox-box" bindtap="__e"><view class="checkbox"><view class="{{[isAllselected?'on':'']}}"></view></view><view class="text">全选</view></view><block wx:if="{{selectedOrderItemIdList.length>0}}"><view data-event-opts="{{[['tap',[['deleteSelectedList',['$event']]]]]}}" class="delete-button" bindtap="__e">删除已选</view></block><view class="settlement"><view class="sum">合计:<view class="money">{{"￥"+sumPrice}}</view></view><view data-event-opts="{{[['tap',[['toConfirmation',['$event']]]]]}}" class="pin-button" bindtap="__e">{{"结算("+selectedOrderItemIdList.length+")"}}</view></view></view></view>